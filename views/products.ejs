<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Pixel Stop</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/cart.css">
    <style>
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .product-card {
            border: 4px solid var(--pixel-black);
            background-color: white;
            position: relative;
            transition: transform 0.3s ease;
        }
                
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 6px 6px 0 var(--minecraft-green);
        }
        
        .product-img {
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-bottom: 4px solid var(--pixel-black);
        }
        
        .product-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-info {
            padding: 1rem;
        }
        
        .product-info h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .product-description {
            font-size: 0.75rem;
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }
        
        .product-price {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--minecraft-green);
            font-weight: bold;
        }
        
        .add-to-cart {
            width: 100%;
        }
        
        /* Game filter buttons */
        .game-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }
        
        .game-filters .pixel-btn {
            min-width: 100px;
            text-align: center;
            font-size: 0.65rem;
            padding: 0.5rem 0.75rem;
        }
        
        .game-filters .pixel-btn.active {
            background-color: var(--minecraft-green);
        }
        
        /* Sort dropdown */
        .sort-dropdown {
            padding: 0.5rem;
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.65rem;
            border: 2px solid var(--pixel-black);
            max-width: 200px;
            height: auto;
        }
        
        .sort-dropdown option {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.65rem;
            padding: 0.25rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container nav-container">
            <div class="logo">
                <img src="/images/logo.png" alt="Pixel Stop Logo" onerror="this.src='/images/placeholder.png'">
                <span>Pixel Stop</span>
            </div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/products">Products</a></li>
                <li><a href="/contact">Contact</a></li>
                <% if (typeof user !== 'undefined' && user) { %>
                    <li><a href="/users/dashboard">Dashboard</a></li>
                    <li><a href="/users/logout">Logout</a></li>
                <% } else { %>
                    <li><a href="/users/login">Login</a></li>
                    <li><a href="/users/register">Register</a></li>
                <% } %>
                <li>
                    <a href="/cart" class="cart-icon">
                        <img src="/images/cart-icon.svg" alt="Cart">
                    <span id="cart-count">0</span>

                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Flash Messages -->
    <% if (typeof message !== 'undefined' && message && message.length > 0) { %>
        <div class="container">
            <div class="alert alert-success">
                <%= message %>
            </div>
        </div>
    <% } %>
    
    <% if (typeof error !== 'undefined' && error && error.length > 0) { %>
        <div class="container">
            <div class="alert alert-danger">
                <%= error %>
            </div>
        </div>
    <% } %>

    <!-- Main Content -->
    <main>
        <section class="hero" style="background: linear-gradient(to bottom, var(--pastel-purple), var(--pastel-blue));">
            <h1>Game Merchandise Collection</h1>
            <p>Discover our wide range of products from your favorite gaming franchises!</p>
        </section>

        <section>
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 2rem 0;">
                    <div>
                        <h2>Browse By Game</h2>
                    </div>
                    <div>
                        <select class="sort-dropdown">
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                        </select>
                    </div>
                </div>
                
                <!-- Game filter buttons -->
                <div class="game-filters">
                    <a href="/products" class="pixel-btn <%= typeof gameFilter === 'undefined' || gameFilter === null ? 'active' : '' %>">All Games</a>
                    <a href="/products/minecraft" class="pixel-btn <%= typeof gameFilter !== 'undefined' && gameFilter === 'minecraft' ? 'active' : '' %>">Minecraft</a>
                    <a href="/products/stardewvalley" class="pixel-btn <%= typeof gameFilter !== 'undefined' && gameFilter === 'stardewvalley' ? 'active' : '' %>">Stardew Valley</a>
                    <a href="/products/terraria" class="pixel-btn <%= typeof gameFilter !== 'undefined' && gameFilter === 'terraria' ? 'active' : '' %>">Terraria</a>
                    <a href="/products/pokemon" class="pixel-btn <%= typeof gameFilter !== 'undefined' && gameFilter === 'pokemon' ? 'active' : '' %>">Pokemon</a>
                    <a href="/products/harvestmoon" class="pixel-btn <%= typeof gameFilter !== 'undefined' && gameFilter === 'harvestmoon' ? 'active' : '' %>">Harvest Moon</a>
                </div>
                
                <div class="products-grid">
                    <!-- Minecraft Products -->
                    <% if (typeof gameFilter === 'undefined' || gameFilter === null || gameFilter === 'minecraft') { %>
                    <div class="product-card" data-product-id="MC001">
                        <div class="product-img">
                            <img src="https://media.vertbaudet.com/Pictures/vertbaudet/535433/minecraft-creeper-t-shirt.jpg?width=457?width=1320" alt="Minecraft Creeper T-shirt">
                        </div>
                        <div class="product-info">
                            <h3>Minecraft Creeper T-shirt</h3>
                            <p class="product-description">Official Minecraft merch featuring the iconic Creeper design.</p>
                            <p class="product-price">P1,449</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    
                    <div class="product-card" data-product-id="MC002">
                        <div class="product-img">
                            <img src="https://minecraftshop.com/cdn/shop/products/MCMATTEL-CREEPERPLUSH-1_1080x.png?v=1622666343" alt="Minecraft Creeper Plush">
                        </div>
                        <div class="product-info">
                            <h3>Minecraft Creeper Plush</h3>
                            <p class="product-description">Soft and cuddly 12-inch Creeper plush toy.</p>
                            <p class="product-price">P1,159</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    <% } %>
                    
                    <!-- Stardew Valley Products -->
                    <% if (typeof gameFilter === 'undefined' || gameFilter === null || gameFilter === 'stardewvalley') { %>
                    <div class="product-card" data-product-id="SV001">
                        <div class="product-img">
                            <img src="https://cdn11.bigcommerce.com/s-fbh9rcmv2i/images/stencil/1280x1280/products/152845/182615/Stardew_Valley_Gaming__41954.1663897660.jpg?c=1" alt="Stardew Valley T-shirt">
                        </div>
                        <div class="product-info">
                            <h3>Stardew Valley T-shirt</h3>
                            <p class="product-description">Comfortable t-shirt featuring the cute Junimos from Stardew Valley.</p>
                            <p class="product-price">P1,333</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    
                    <div class="product-card" data-product-id="SV002">
                        <div class="product-img">
                            <img src="https://m.media-amazon.com/images/I/71sgoNkWxfL.jpg" alt="Stardew Valley Junimo Plush">
                        </div>
                        <div class="product-info">
                            <h3>Stardew Valley Junimo Plush</h3>
                            <p class="product-description">Adorable plush toy of the forest spirits from Stardew Valley.</p>
                            <p class="product-price">P1,333</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    <% } %>
                    
                    <!-- Terraria Products -->
                    <% if (typeof gameFilter === 'undefined' || gameFilter === null || gameFilter === 'terraria') { %>
                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://i.etsystatic.com/39379200/r/il/aa25bc/4476548397/il_fullxfull.4476548397_fu9d.jpg" alt="Terraria Poster">
                        </div>
                        <div class="product-info">
                            <h3>Terraria Wall Poster</h3>
                            <p class="product-description">High-quality poster featuring the vibrant world of Terraria.</p>
                            <p class="product-price">P869</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://fireandsteel.ca/cdn/shop/files/TrueNightsEdgeSword05_700x700.jpg?v=1756991684" alt="Terraria Poster">
                        </div>
                        <div class="product-info">
                            <h3>Terraria Blade Replica</h3>
                            <p class="product-description">High-quality replica of the iconic Terra Blade from Terraria.</p>
                            <p class="product-price">P2,319</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    <% } %>
                    
                    <!-- Pokemon Products -->
                    <% if (typeof gameFilter === 'undefined' || gameFilter === null || gameFilter === 'pokemon') { %>
                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://i.ebayimg.com/images/g/hvwAAOSwUChiDT8s/s-l1200.jpg" alt="Pokemon Pikachu Hoodie">
                        </div>
                        <div class="product-info">
                            <h3>Pokemon Pikachu Hoodie</h3>
                            <p class="product-description">Cozy hoodie featuring the beloved Pikachu character.</p>
                            <p class="product-price">P2,319</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://i5.walmartimages.com/seo/CXDA-Female-Ears-Moving-Up-Down-Air-Bag-Plush-Toy-Cap-yellow_1b82b3fc-6762-45f0-ba7d-a477640dfe63.6292c048cbc5864e6856346399630d49.jpeg" alt="Pokemon Pikachu Hoodie">
                        </div>
                        <div class="product-info">
                            <h3>Pikachu Hat</h3>
                            <p class="product-description">Cozy hat featuring the beloved Pikachu character.</p>
                            <p class="product-price">P1,333</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    
                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://m.media-amazon.com/images/I/61A-W01R-YL._UF894,1000_QL80_.jpg" alt="Pokemon Pokeball Mug">
                        </div>
                        <div class="product-info">
                            <h3>Pokemon Pokeball Mug</h3>
                            <p class="product-description">Ceramic mug shaped like the iconic Pokeball.</p>
                            <p class="product-price">P1,101</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    <% } %>
                    
                    <!-- Harvest Moon Products -->
                    <% if (typeof gameFilter === 'undefined' || gameFilter === null || gameFilter === 'harvestmoon') { %>
                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://www.animalhearted.com/cdn/shop/products/harvest-moon-cat-t-shirt_700x700.jpg?v=1633055741" alt="Harvest Moon T-shirt">
                        </div>
                        <div class="product-info">
                            <h3>Harvest Moon T-shirt</h3>
                            <p class="product-description">Comfortable t-shirt featuring classic Harvest Moon artwork.</p>
                            <p class="product-price">P1,333</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://www.gamespot.com/a/uploads/original/1702/17023653/4170586-plush.jpg" alt="Harvest Moon T-shirt">
                        </div>
                        <div class="product-info">
                            <h3>Harvest Moon Cow Plush</h3>
                            <p class="product-description">Soft and cuddly plush toy of the iconic Harvest Moon cow.</p>
                            <p class="product-price">P753</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-img">
                            <img src="https://i.pinimg.com/736x/10/5c/12/105c1225a2f76b3f8f8c5ec6d4041f24.jpg" alt="Harvest Moon T-shirt">
                        </div>
                        <div class="product-info">
                            <h3>Harvest Moon Figurine</h3>
                            <p class="product-description">Collectible figurine of the iconic Harvest Moon cow.</p>
                            <p class="product-price">P1,391</p> 
                            <button class="pixel-btn add-to-cart">Add to Cart</button>
                        </div>
                    </div>
                    <% } %>
                </div>
            </div>
        </section>

        <section>
            <div class="container">
                <div class="pixel-box">
                    <h2>Join the Pixel Gamer Club!</h2>
                    <p>Subscribe to our newsletter for exclusive deals, upcoming releases, and special events.</p>
                    
                    <form style="display: flex; gap: 1rem; margin-top: 1rem;">
                        <input type="email" placeholder="Your email address" style="flex: 1;">
                        <button type="submit" class="pixel-btn">Subscribe</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <%- include('/partials/footer.ejs') %>

    <!-- js -->
    <script>
        // product filtering and sorting script
        document.addEventListener('DOMContentLoaded', function() {
            // Add to cart function
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productName = this.closest('.product-info').querySelector('h3').textContent;
                    alert(`Added ${productName} to your cart!`);
                    
                    // Animation effect
                    this.textContent = 'Added!';
                    this.style.backgroundColor = 'var(--minecraft-green)';
                    
                    setTimeout(() => {
                        this.textContent = 'Add to Cart';
                        this.style.backgroundColor = '';
                    }, 2000);
                });
            });
            
            // Sorting functionality
            const sortDropdown = document.querySelector('.sort-dropdown');
            if (sortDropdown) {
                sortDropdown.addEventListener('change', function() {
                    const products = Array.from(document.querySelectorAll('.product-card'));
                    const productsGrid = document.querySelector('.products-grid');
                    
                    products.sort((a, b) => {
                        const priceA = parseFloat(a.querySelector('.product-price').textContent.replace('$', ''));
                        const priceB = parseFloat(b.querySelector('.product-price').textContent.replace('$', ''));
                        
                        if (this.value === 'price-low') {
                            return priceA - priceB;
                        } else if (this.value === 'price-high') {
                            return priceB - priceA;
                        }
                        
                        return 0;
                    });
                    
                    productsGrid.innerHTML = '';
                    products.forEach(product => {
                        productsGrid.appendChild(product);
                    });
                });
            }
        });
    </script>
    
    <script src="/js/cart.js"></script>
</body>
</html>